import{j as s,F as o,a as m,b,d as N}from"./react-UFG7_BGz.js";import"./index-fVTxKraB.js";import"./vendor-SPyfQU6S.js";function f({cart:n,setCart:x,isCartVisible:l,setIsCartVisible:i,addToCart:h,removeFromCart:d}){const u=n.reduce((a,t)=>a+(t.subtotal||t.price*t.quantity),0),j=(a,t)=>{const c=prompt("請輸入新的小計金額：",t);if(c===null)return;const r=parseFloat(c);if(isNaN(r)||r<0){alert("請輸入有效的數字！");return}const p=n.map(e=>(e.barcode||e.name)===a?{...e,subtotal:r}:e);x(p)};return s.jsxs(s.Fragment,{children:[!l&&s.jsxs("div",{className:"cart-toggle-button",onClick:()=>i(!0),children:[s.jsx(o,{}),n.length>0&&s.jsx("span",{className:"cart-badge",children:n.length})]}),l&&s.jsxs("div",{className:"cart-container",children:[s.jsxs("div",{className:"cart-header",children:[s.jsx(o,{className:"cart-icon"}),s.jsx("h2",{children:"購物車"}),s.jsx("button",{className:"cart-close-btn",onClick:()=>i(!1),children:s.jsx(m,{})})]}),n.length===0?s.jsx("p",{children:"購物車是空的"}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"cart-items",children:n.map(a=>{const t=a.barcode||a.name;return s.jsxs("li",{className:"cart-item",children:[s.jsx("div",{className:"cart-item-image",children:s.jsx("img",{src:`/cpaysearch/${a.image}`,alt:a.name,onError:c=>{c.target.onerror=null,c.target.src="/cpaysearch/vite.svg"}})}),s.jsxs("div",{className:"cart-item-details",children:[s.jsxs("div",{className:"cart-item-info",children:[s.jsx("h3",{children:a.name}),s.jsxs("p",{children:["售價: $",a.price]})]}),s.jsxs("div",{className:"cart-item-quantity",children:[s.jsx("button",{onClick:()=>d(t),children:s.jsx(b,{})}),s.jsx("span",{children:a.quantity}),s.jsx("button",{onClick:()=>h(a),children:s.jsx(N,{})}),s.jsx("button",{className:"delete-btn",onClick:()=>d(t),children:"刪除"})]}),s.jsxs("div",{className:"cart-item-subtotal",children:[s.jsx("br",{}),"小計: ",s.jsxs("strong",{children:["$",(a.subtotal||a.price*a.quantity).toFixed(2)]}),s.jsx("button",{className:"edit-btn",onClick:()=>j(t,a.subtotal||a.price*a.quantity),children:"修改"})]})]})]},t)})}),s.jsxs("div",{className:"cart-total",children:[s.jsxs("p",{children:["總計: NT$ ",u.toFixed(2)]}),s.jsx("button",{className:"checkout-btn",children:"結帳"})]})]})]})]})}export{f as default};
