const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Cart-qBcNsqqj.js","assets/react-UFG7_BGz.js","assets/vendor-SPyfQU6S.js"])))=>i.map(i=>d[i]);
import{r as d,j as e,c as N}from"./react-UFG7_BGz.js";import"./vendor-SPyfQU6S.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const t of c.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&h(t)}).observe(document,{childList:!0,subtree:!0});function m(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function h(r){if(r.ep)return;r.ep=!0;const c=m(r);fetch(r.href,c)}})();const S="modulepreload",P=function(p){return"/cpaysearch/"+p},b={},C=function(u,m,h){let r=Promise.resolve();if(m&&m.length>0){document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),a=(t==null?void 0:t.nonce)||(t==null?void 0:t.getAttribute("nonce"));r=Promise.allSettled(m.map(i=>{if(i=P(i),i in b)return;b[i]=!0;const f=i.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${g}`))return;const l=document.createElement("link");if(l.rel=f?"stylesheet":S,f||(l.as="script"),l.crossOrigin="",l.href=i,a&&l.setAttribute("nonce",a),document.head.appendChild(l),f)return new Promise((y,j)=>{l.addEventListener("load",y),l.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${i}`)))})}))}function c(t){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=t,window.dispatchEvent(a),!a.defaultPrevented)throw t}return r.then(t=>{for(const a of t||[])a.status==="rejected"&&c(a.reason);return u().catch(c)})},L=d.lazy(()=>C(()=>import("./Cart-qBcNsqqj.js"),__vite__mapDeps([0,1,2])));function w(){const[p,u]=d.useState([]),[m,h]=d.useState(!0),[r,c]=d.useState(null);d.useEffect(()=>{(async()=>{try{const x=await(await fetch("/cpaysearch/products.json")).json();u(x),h(!1)}catch(o){console.error("加載商品數據時出錯:",o),c("無法加載商品數據，請稍後再試。"),h(!1)}})()},[]);const[t,a]=d.useState([]),[i,f]=d.useState(!1),[g,l]=d.useState(""),y=s=>{l(s.target.value)},j=p.filter(s=>s.name.toLowerCase().includes(g.toLowerCase())),v=s=>{const o=s.barcode||s.name,x=t.find(n=>(n.barcode||n.name)===o);a(x?t.map(n=>(n.barcode||n.name)===o?{...n,quantity:n.quantity+1}:n):[...t,{...s,quantity:1}])},E=s=>{const o=s;t.find(n=>(n.barcode||n.name)===o).quantity===1?a(t.filter(n=>(n.barcode||n.name)!==o)):a(t.map(n=>(n.barcode||n.name)===o?{...n,quantity:n.quantity-1}:n))};return e.jsxs("div",{className:"app-container",children:[e.jsxs("header",{className:"header",children:[e.jsx("h1",{children:"購物網站"}),e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",id:"search",name:"search",placeholder:"搜尋商品...",value:g,onChange:y,className:"search-input"})})]}),e.jsxs("div",{className:"main-content",children:[e.jsxs("div",{className:"products-container",children:[e.jsx("h2",{children:"商品列表"}),m&&e.jsx("p",{children:"商品載入中..."}),r&&e.jsx("p",{className:"error",children:r}),e.jsx("div",{className:"products-grid",children:j.map(s=>e.jsxs("div",{className:"product-card",children:[s.rating&&e.jsxs("div",{className:"product-badge",children:[s.rating," ★"]}),e.jsx("img",{src:`/cpaysearch/${s.image}`,alt:s.name,className:"product-image",onError:o=>{o.target.onerror=null,o.target.src="/cpaysearch/vite.svg"}}),e.jsxs("div",{className:"product-content",children:[e.jsx("h3",{children:s.name}),e.jsx("p",{className:"product-description",children:s.description}),e.jsxs("p",{className:"product-price",children:["NT$ ",s.price.toLocaleString()]}),e.jsx("button",{className:"add-to-cart-btn",onClick:()=>v(s),children:"加入購物車"})]})]},s.barcode||s.name))})]}),e.jsx(d.Suspense,{fallback:e.jsx("div",{children:"🛒 購物車載入中..."}),children:e.jsx(L,{cart:t,setCart:a,isCartVisible:i,setIsCartVisible:f,addToCart:v,removeFromCart:E})})]})]})}N.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(w,{})}));
